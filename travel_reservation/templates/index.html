<!-- templates/index.html -->
{% extends "base.html" %}

{% block title %}Luxury Travel Reservations - Home{% endblock %}

{% block extra_css %}
<style>
    /* Hero Section with Three.js Background */
    #hero {
        height: 100vh;
        position: relative;
        overflow: hidden;
    }

    #three-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
    }

    .hero-content {
        position: relative;
        z-index: 1;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
    }

    /* Section spacing */
    section {
        padding: 100px 0;
    }

    /* Card hover effects */
    .destination-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .destination-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }

    /* Staggered animations */
    .stagger-item {
        opacity: 0;
        transform: translateY(30px);
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section id="hero">
    <div id="three-container"></div>
    <div class="hero-content container mx-auto px-6">
        <h1 class="text-5xl md:text-7xl font-thin mb-6 fade-in-up">Discover Extraordinary Journeys</h1>
        <p class="text-xl md:text-2xl text-[#94A3B8] mb-12 max-w-3xl fade-in-up" style="animation-delay: 0.2s;">
            Experience luxury travel with our premium reservation service. Unforgettable destinations await.
        </p>

        <!-- Search Box -->
        <div class="glass rounded-2xl p-8 w-full max-w-3xl shadow-2xl fade-in-up" style="animation-delay: 0.4s;">
            <h3 class="text-2xl font-light mb-6">Find Your Perfect Getaway</h3>
            <form action="/search" method="GET" class="flex flex-col md:flex-row gap-4">
                <input type="text" name="q" placeholder="Search destinations..."
                    class="flex-grow bg-white/10 border border-white/20 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#0284C7] text-white placeholder-gray-300">
                <button type="submit"
                    class="bg-[#F97316] hover:bg-[#EA580C] text-white px-8 py-3 rounded-lg transition-colors font-medium">Search</button>
            </form>
        </div>
    </div>
</section>

<!-- Featured Destinations -->
<section id="destinations" class="bg-[#0F172A]">
    <div class="container mx-auto px-6">
        <div class="text-center mb-16">
            <h2 class="text-4xl font-thin mb-4">Featured Destinations</h2>
            <p class="text-[#94A3B8] max-w-2xl mx-auto">Discover our hand-picked selection of luxury destinations around
                the world</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for destination in featured_destinations %}
            <div class="destination-card bg-[#1E293B] rounded-2xl overflow-hidden stagger-item">
                <div class="h-64 overflow-hidden">
                    <img src="{{ destination.image_url }}" alt="{{ destination.name }}"
                        class="w-full h-full object-cover transition-transform duration-500 hover:scale-110">
                </div>
                <div class="p-6">
                    <div class="flex justify-between items-start mb-4">
                        <h3 class="text-xl font-semibold">{{ destination.name }}</h3>
                        <span class="bg-[#0284C7] text-white px-3 py-1 rounded-full text-sm">${{ destination.price
                            }}</span>
                    </div>
                    <p class="text-[#94A3B8] mb-4">{{ destination.description[:100] }}...</p>
                    <div class="flex justify-between items-center">
                        <div class="flex items-center">
                            <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                                <path
                                    d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                            </svg>
                            <span class="ml-1">{{ destination.rating }}</span>
                        </div>
                        <a href="/booking/{{ destination.id }}"
                            class="bg-[#0284C7] hover:bg-[#0369A1] text-white px-4 py-2 rounded-lg transition-colors">Book
                            Now</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Best Deals -->
<section id="deals" class="bg-[#1E293B]">
    <div class="container mx-auto px-6">
        <div class="text-center mb-16">
            <h2 class="text-4xl font-thin mb-4">Best Deals</h2>
            <p class="text-[#94A3B8] max-w-2xl mx-auto">Special offers and discounted packages for our luxury
                destinations</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            {% for destination in all_destinations %}
            <div class="bg-[#0F172A] rounded-2xl overflow-hidden stagger-item">
                <div class="h-48 overflow-hidden">
                    <img src="{{ destination.image_url }}" alt="{{ destination.name }}"
                        class="w-full h-full object-cover">
                </div>
                <div class="p-4">
                    <h3 class="font-semibold mb-2">{{ destination.name }}</h3>
                    <div class="flex justify-between items-center">
                        <span class="text-[#F97316] font-bold">${{ destination.price }}</span>
                        <a href="/booking/{{ destination.id }}"
                            class="text-[#0284C7] hover:text-[#0369A1] transition-colors">Details</a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- How It Works -->
<section id="how-it-works" class="bg-[#0F172A]">
    <div class="container mx-auto px-6">
        <div class="text-center mb-16">
            <h2 class="text-4xl font-thin mb-4">How It Works</h2>
            <p class="text-[#94A3B8] max-w-2xl mx-auto">Three simple steps to your dream vacation</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div class="text-center stagger-item">
                <div class="bg-[#1E293B] w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6">
                    <svg class="w-10 h-10 text-[#0284C7]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </div>
                <h3 class="text-xl font-semibold mb-4">Search & Explore</h3>
                <p class="text-[#94A3B8]">Browse our luxury destinations and find the perfect match for your travel
                    style.</p>
            </div>

            <div class="text-center stagger-item" style="animation-delay: 0.2s;">
                <div class="bg-[#1E293B] w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6">
                    <svg class="w-10 h-10 text-[#0284C7]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>
                </div>
                <h3 class="text-xl font-semibold mb-4">Book & Confirm</h3>
                <p class="text-[#94A3B8]">Select your dates and make a reservation with our secure booking system.</p>
            </div>

            <div class="text-center stagger-item" style="animation-delay: 0.4s;">
                <div class="bg-[#1E293B] w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6">
                    <svg class="w-10 h-10 text-[#0284C7]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064" />
                    </svg>
                </div>
                <h3 class="text-xl font-semibold mb-4">Travel & Enjoy</h3>
                <p class="text-[#94A3B8]">Embark on your journey and create unforgettable memories with our premium
                    service.</p>
            </div>
        </div>
    </div>
</section>

<!-- Testimonials -->
<section id="testimonials" class="bg-[#1E293B]">
    <div class="container mx-auto px-6">
        <div class="text-center mb-16">
            <h2 class="text-4xl font-thin mb-4">What Our Travelers Say</h2>
            <p class="text-[#94A3B8] max-w-2xl mx-auto">Hear from our satisfied customers about their luxury travel
                experiences</p>
        </div>

        <div class="max-w-4xl mx-auto">
            <div class="bg-[#0F172A] rounded-2xl p-8 glass stagger-item">
                <div class="flex items-center mb-6">
                    <div
                        class="w-16 h-16 bg-[#0284C7] rounded-full flex items-center justify-center text-white font-bold text-xl">
                        JS</div>
                    <div class="ml-4">
                        <h4 class="font-semibold">John Smith</h4>
                        <p class="text-[#94A3B8]">Bali Paradise Trip</p>
                    </div>
                </div>
                <p class="text-lg italic text-[#E2E8F0]">
                    "The entire experience was flawless. From booking to the actual trip, everything exceeded our
                    expectations. The luxury resort in Bali was breathtaking, and the service was impeccable. Will
                    definitely book again!"
                </p>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Three.js Particle System for Hero Background
    document.addEventListener('DOMContentLoaded', function () {
        // Setup
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.getElementById('three-container').appendChild(renderer.domElement);

        // Create particles
        const particlesGeometry = new THREE.BufferGeometry();
        const particlesCount = 5000;

        const posArray = new Float32Array(particlesCount * 3);

        for (let i = 0; i < particlesCount * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 10;
        }

        particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));

        // Material
        const particlesMaterial = new THREE.PointsMaterial({
            size: 0.005,
            color: 0x0284C7
        });

        // Points system
        const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);
        scene.add(particlesMesh);

        camera.position.z = 2;

        // Mouse movement effect
        let mouseX = 0;
        let mouseY = 0;

        document.addEventListener('mousemove', (event) => {
            mouseX = event.clientX / window.innerWidth - 0.5;
            mouseY = event.clientY / window.innerHeight - 0.5;
        });

        // Animation
        function animate() {
            requestAnimationFrame(animate);

            particlesMesh.rotation.y += 0.001;
            particlesMesh.rotation.x += 0.001;

            // Add subtle movement based on mouse position
            particlesMesh.rotation.x += mouseY * 0.0005;
            particlesMesh.rotation.y += mouseX * 0.0005;

            renderer.render(scene, camera);
        }

        animate();

        // Handle window resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // Staggered animation for elements
        const staggerItems = document.querySelectorAll('.stagger-item');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const delay = entry.target.style.animationDelay || '0s';
                    entry.target.style.animation = `fadeInUp 0.8s ease-out ${delay} forwards`;
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });

        staggerItems.forEach(item => {
            observer.observe(item);
        });
    });
</script>
{% endblock %}